import{C as f}from"./stimulus-e54d982b.js";import{t as s}from"./trackProductAnalytics-3d5f89d8.js";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},u(e,t)}function p(e){var t=b();return function(){var r=a(e),i;if(t){var o=a(this).constructor;i=Reflect.construct(r,arguments,o)}else i=r.apply(this,arguments);return _(this,i)}}function _(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},a(e)}var k=function(e){y(n,e);var t=p(n);function n(){return l(this,n),t.apply(this,arguments)}return h(n,[{key:"initialize",value:function(){this.hasAsyncTrackingValue||(this.asyncTrackingValue=!0),this.hasSiteTrackingValue||(this.siteTrackingValue=!1),this._track=this._track.bind(this),this._isBusy=!1}},{key:"connect",value:function(){this.hasBrowserEventValue?this.element.addEventListener(this.browserEventValue,this._track):this._track()}},{key:"disconnect",value:function(){this.hasBrowserEventValue&&this.element.removeEventListener(this.browserEventValue,this._track)}},{key:"_track",value:function(i){var o=this;if(!this._isBusy){if(this._isBusy=!0,this.browserEventValue==="click"&&this.element.href&&this.asyncTrackingValue===!1){i.preventDefault(),s(this.nameValue,this.propertiesValue,{siteTracking:this.siteTrackingValue}).finally(function(){window.location.href=o.element.href});return}setTimeout(function(){s(o.nameValue,o.propertiesValue,{siteTracking:o.siteTrackingValue})},0),this.onceValue&&this.hasBrowserEventValue&&this.element.removeEventListener(this.browserEventValue,this._track),this._isBusy=!1}}}]),n}(f);k.values={browserEvent:String,name:String,properties:Object,asyncTracking:Boolean,siteTracking:Boolean,once:Boolean};export{k as _};
//# sourceMappingURL=track_product_analytics-9c66ca0a.js.map
