function C(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */C=function(){return c};var c={},k=Object.prototype,h=k.hasOwnProperty,y=typeof Symbol=="function"?Symbol:{},v=y.iterator||"@@iterator",E=y.asyncIterator||"@@asyncIterator",g=y.toStringTag||"@@toStringTag";function u(r,t,e){return Object.defineProperty(r,t,{value:e,enumerable:!0,configurable:!0,writable:!0}),r[t]}try{u({},"")}catch{u=function(e,n,o){return e[n]=o}}function m(r,t,e,n){var o=t&&t.prototype instanceof N?t:N,i=Object.create(o.prototype),s=new A(n||[]);return i._invoke=function(w,_,a){var f="suspendedStart";return function(L,$){if(f==="executing")throw new Error("Generator is already running");if(f==="completed"){if(L==="throw")throw $;return K()}for(a.method=L,a.arg=$;;){var q=a.delegate;if(q){var j=Y(q,a);if(j){if(j===p)continue;return j}}if(a.method==="next")a.sent=a._sent=a.arg;else if(a.method==="throw"){if(f==="suspendedStart")throw f="completed",a.arg;a.dispatchException(a.arg)}else a.method==="return"&&a.abrupt("return",a.arg);f="executing";var S=b(w,_,a);if(S.type==="normal"){if(f=a.done?"completed":"suspendedYield",S.arg===p)continue;return{value:S.arg,done:a.done}}S.type==="throw"&&(f="completed",a.method="throw",a.arg=S.arg)}}}(r,e,s),i}function b(r,t,e){try{return{type:"normal",arg:r.call(t,e)}}catch(n){return{type:"throw",arg:n}}}c.wrap=m;var p={};function N(){}function T(){}function l(){}var I={};u(I,v,function(){return this});var d=Object.getPrototypeOf,P=d&&d(d(D([])));P&&P!==k&&h.call(P,v)&&(I=P);var O=l.prototype=N.prototype=Object.create(I);function V(r){["next","throw","return"].forEach(function(t){u(r,t,function(e){return this._invoke(t,e)})})}function G(r,t){function e(o,i,s,w){var _=b(r[o],r,i);if(_.type!=="throw"){var a=_.arg,f=a.value;return f&&typeof f=="object"&&h.call(f,"__await")?t.resolve(f.__await).then(function(L){e("next",L,s,w)},function(L){e("throw",L,s,w)}):t.resolve(f).then(function(L){a.value=L,s(a)},function(L){return e("throw",L,s,w)})}w(_.arg)}var n;this._invoke=function(o,i){function s(){return new t(function(w,_){e(o,i,w,_)})}return n=n?n.then(s,s):s()}}function Y(r,t){var e=r.iterator[t.method];if(e===void 0){if(t.delegate=null,t.method==="throw"){if(r.iterator.return&&(t.method="return",t.arg=void 0,Y(r,t),t.method==="throw"))return p;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=b(e,r.iterator,t.arg);if(n.type==="throw")return t.method="throw",t.arg=n.arg,t.delegate=null,p;var o=n.arg;return o?o.done?(t[r.resultName]=o.value,t.next=r.nextLoc,t.method!=="return"&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function B(r){var t={tryLoc:r[0]};1 in r&&(t.catchLoc=r[1]),2 in r&&(t.finallyLoc=r[2],t.afterLoc=r[3]),this.tryEntries.push(t)}function R(r){var t=r.completion||{};t.type="normal",delete t.arg,r.completion=t}function A(r){this.tryEntries=[{tryLoc:"root"}],r.forEach(B,this),this.reset(!0)}function D(r){if(r){var t=r[v];if(t)return t.call(r);if(typeof r.next=="function")return r;if(!isNaN(r.length)){var e=-1,n=function o(){for(;++e<r.length;)if(h.call(r,e))return o.value=r[e],o.done=!1,o;return o.value=void 0,o.done=!0,o};return n.next=n}}return{next:K}}function K(){return{value:void 0,done:!0}}return T.prototype=l,u(O,"constructor",l),u(l,"constructor",T),T.displayName=u(l,g,"GeneratorFunction"),c.isGeneratorFunction=function(r){var t=typeof r=="function"&&r.constructor;return!!t&&(t===T||(t.displayName||t.name)==="GeneratorFunction")},c.mark=function(r){return Object.setPrototypeOf?Object.setPrototypeOf(r,l):(r.__proto__=l,u(r,g,"GeneratorFunction")),r.prototype=Object.create(O),r},c.awrap=function(r){return{__await:r}},V(G.prototype),u(G.prototype,E,function(){return this}),c.AsyncIterator=G,c.async=function(r,t,e,n,o){o===void 0&&(o=Promise);var i=new G(m(r,t,e,n),o);return c.isGeneratorFunction(t)?i:i.next().then(function(s){return s.done?s.value:i.next()})},V(O),u(O,g,"Generator"),u(O,v,function(){return this}),u(O,"toString",function(){return"[object Generator]"}),c.keys=function(r){var t=[];for(var e in r)t.push(e);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in r)return n.value=o,n.done=!1,n}return n.done=!0,n}},c.values=D,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(R),!t)for(var e in this)e.charAt(0)==="t"&&h.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if(t.type==="throw")throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(a,f){return s.type="throw",s.arg=t,e.next=a,f&&(e.method="next",e.arg=void 0),!!f}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if(i.tryLoc==="root")return n("end");if(i.tryLoc<=this.prev){var w=h.call(i,"catchLoc"),_=h.call(i,"finallyLoc");if(w&&_){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(w){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!_)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&h.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&(t==="break"||t==="continue")&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(s)},complete:function(t,e){if(t.type==="throw")throw t.arg;return t.type==="break"||t.type==="continue"?this.next=t.arg:t.type==="return"?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):t.type==="normal"&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),R(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if(o.type==="throw"){var i=o.arg;R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:D(t),resultName:e,nextLoc:n},this.method==="next"&&(this.arg=void 0),p}},c}function M(c,k,h,y,v,E,g){try{var u=c[E](g),m=u.value}catch(b){h(b);return}u.done?k(m):Promise.resolve(m).then(y,v)}function J(c){return function(){var k=this,h=arguments;return new Promise(function(y,v){var E=c.apply(k,h);function g(m){M(E,y,v,g,u,"next",m)}function u(m){M(E,y,v,g,u,"throw",m)}g(void 0)})}}var U="Invalid event type",W="Invalid event properties",X=function(){var c=J(C().mark(function k(h){var y,v,E,g,u,m,b,p,N,T,l=arguments;return C().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(v=l.length>1&&l[1]!==void 0?l[1]:{},E=l.length>2&&l[2]!==void 0?l[2]:{debug:!1,siteTracking:!1},g="/admin/track_events/track",u="/kj_track_events/track",m=E.debug,b=E.siteTracking,p=b?u:g,N=(y=document.querySelector('meta[name="csrf-token"]'))===null||y===void 0?void 0:y.content,h){d.next=9;break}return d.abrupt("return",{success:!1,message:U});case 9:if(v){d.next=11;break}return d.abrupt("return",{success:!1,message:W});case 11:return d.next=13,fetch(p,{method:"POST",body:JSON.stringify({event:{event_type:h,event_properties:v}}),headers:{"Content-Type":"application/json","X-CSRF-TOKEN":N}});case 13:return T=d.sent,m&&console.log("DEBUG INFO: Data from track event",T),d.abrupt("return",T);case 16:case"end":return d.stop()}},k)}));return function(h){return c.apply(this,arguments)}}();export{X as t};
//# sourceMappingURL=trackProductAnalytics-3d5f89d8.js.map
